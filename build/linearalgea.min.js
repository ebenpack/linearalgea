/*

 Copyright (c) 2014 Eben Packwood. All rights reserved.
 MIT License

*/
!function(q){if("object"==typeof exports)module.exports=q();else if("function"==typeof define&&define.amd)define(q);else{var g;"undefined"!=typeof window?g=window:"undefined"!=typeof global?g=global:"undefined"!=typeof self&&(g=self);g.linearalgea=q()}}(function(){return function g(m,n,c){function h(b,e){if(!n[b]){if(!m[b]){var a="function"==typeof require&&require;if(!e&&a)return a(b,!0);if(k)return k(b,!0);throw Error("Cannot find module '"+b+"'");}a=n[b]={exports:{}};m[b][0].call(a.exports,function(a){var c=
m[b][1][a];return h(c?c:a)},a,a.exports,g,m,n,c)}return n[b].exports}for(var k="function"==typeof require&&require,b=0;b<c.length;b++)h(c[b]);return h}({1:[function(g,m,n){n=g("./vector.js");g=g("./matrix.js");var c=Object.create(null);c.Vector=n;c.Matrix=g;m.exports=c},{"./matrix.js":2,"./vector.js":3}],2:[function(g,m,n){function c(){for(var a=0;16>a;a++)this[a]=0;this.length=16}g=g("./vector.js");c.prototype.equal=function(a){for(var d=0,b=this.length;d<b;d++)if(this[d]!==a[d])return!1;return!0};
c.prototype.add=function(a){for(var d=new c,b=0,f=this.length;b<f;b++)d[b]=this[b]+a[b];return d};c.prototype.addLG=function(a,d){d[0]=this[0]+a[0];d[1]=this[1]+a[1];d[2]=this[2]+a[2];d[3]=this[3]+a[3];d[4]=this[4]+a[4];d[5]=this[5]+a[5];d[6]=this[6]+a[6];d[7]=this[7]+a[7];d[8]=this[8]+a[8];d[9]=this[9]+a[9];d[10]=this[10]+a[10];d[11]=this[11]+a[11];d[12]=this[12]+a[12];d[13]=this[13]+a[13];d[14]=this[14]+a[14];d[15]=this[15]+a[15];return d};c.prototype.subtract=function(a){for(var d=new c,b=0,f=
this.length;b<f;b++)d[b]=this[b]-a[b];return d};c.prototype.subtractLG=function(a,d){d[0]=this[0]-a[0];d[1]=this[1]-a[1];d[2]=this[2]-a[2];d[3]=this[3]-a[3];d[4]=this[4]-a[4];d[5]=this[5]-a[5];d[6]=this[6]-a[6];d[7]=this[7]-a[7];d[8]=this[8]-a[8];d[9]=this[9]-a[9];d[10]=this[10]-a[10];d[11]=this[11]-a[11];d[12]=this[12]-a[12];d[13]=this[13]-a[13];d[14]=this[14]-a[14];d[15]=this[15]-a[15];return d};c.prototype.multiplyScalar=function(a){for(var d=new c,b=0,f=this.length;b<f;b++)d[b]=this[b]*a;return d};
c.prototype.multiplyScalarLG=function(a,d){d[0]=this[0]*a;d[1]=this[1]*a;d[2]=this[2]*a;d[3]=this[3]*a;d[4]=this[4]*a;d[5]=this[5]*a;d[6]=this[6]*a;d[7]=this[7]*a;d[8]=this[8]*a;d[9]=this[9]*a;d[10]=this[10]*a;d[11]=this[11]*a;d[12]=this[12]*a;d[13]=this[13]*a;d[14]=this[14]*a;d[15]=this[15]*a;return d};c.prototype.multiply=function(a){var d=new c;d[0]=this[0]*a[0]+this[1]*a[4]+this[2]*a[8]+this[3]*a[12];d[1]=this[0]*a[1]+this[1]*a[5]+this[2]*a[9]+this[3]*a[13];d[2]=this[0]*a[2]+this[1]*a[6]+this[2]*
a[10]+this[3]*a[14];d[3]=this[0]*a[3]+this[1]*a[7]+this[2]*a[11]+this[3]*a[15];d[4]=this[4]*a[0]+this[5]*a[4]+this[6]*a[8]+this[7]*a[12];d[5]=this[4]*a[1]+this[5]*a[5]+this[6]*a[9]+this[7]*a[13];d[6]=this[4]*a[2]+this[5]*a[6]+this[6]*a[10]+this[7]*a[14];d[7]=this[4]*a[3]+this[5]*a[7]+this[6]*a[11]+this[7]*a[15];d[8]=this[8]*a[0]+this[9]*a[4]+this[10]*a[8]+this[11]*a[12];d[9]=this[8]*a[1]+this[9]*a[5]+this[10]*a[9]+this[11]*a[13];d[10]=this[8]*a[2]+this[9]*a[6]+this[10]*a[10]+this[11]*a[14];d[11]=
this[8]*a[3]+this[9]*a[7]+this[10]*a[11]+this[11]*a[15];d[12]=this[12]*a[0]+this[13]*a[4]+this[14]*a[8]+this[15]*a[12];d[13]=this[12]*a[1]+this[13]*a[5]+this[14]*a[9]+this[15]*a[13];d[14]=this[12]*a[2]+this[13]*a[6]+this[14]*a[10]+this[15]*a[14];d[15]=this[12]*a[3]+this[13]*a[7]+this[14]*a[11]+this[15]*a[15];return d};c.prototype.multiplyLG=function(a,d){d[0]=this[0]*a[0]+this[1]*a[4]+this[2]*a[8]+this[3]*a[12];d[1]=this[0]*a[1]+this[1]*a[5]+this[2]*a[9]+this[3]*a[13];d[2]=this[0]*a[2]+this[1]*a[6]+
this[2]*a[10]+this[3]*a[14];d[3]=this[0]*a[3]+this[1]*a[7]+this[2]*a[11]+this[3]*a[15];d[4]=this[4]*a[0]+this[5]*a[4]+this[6]*a[8]+this[7]*a[12];d[5]=this[4]*a[1]+this[5]*a[5]+this[6]*a[9]+this[7]*a[13];d[6]=this[4]*a[2]+this[5]*a[6]+this[6]*a[10]+this[7]*a[14];d[7]=this[4]*a[3]+this[5]*a[7]+this[6]*a[11]+this[7]*a[15];d[8]=this[8]*a[0]+this[9]*a[4]+this[10]*a[8]+this[11]*a[12];d[9]=this[8]*a[1]+this[9]*a[5]+this[10]*a[9]+this[11]*a[13];d[10]=this[8]*a[2]+this[9]*a[6]+this[10]*a[10]+this[11]*a[14];
d[11]=this[8]*a[3]+this[9]*a[7]+this[10]*a[11]+this[11]*a[15];d[12]=this[12]*a[0]+this[13]*a[4]+this[14]*a[8]+this[15]*a[12];d[13]=this[12]*a[1]+this[13]*a[5]+this[14]*a[9]+this[15]*a[13];d[14]=this[12]*a[2]+this[13]*a[6]+this[14]*a[10]+this[15]*a[14];d[15]=this[12]*a[3]+this[13]*a[7]+this[14]*a[11]+this[15]*a[15];return d};c.prototype.negate=function(){for(var a=new c,d=0,b=this.length;d<b;d++)a[d]=-this[d];return a};c.prototype.negateLG=function(a){a[0]=-this[0];a[1]=-this[1];a[2]=-this[2];a[3]=
-this[3];a[4]=-this[4];a[5]=-this[5];a[6]=-this[6];a[7]=-this[7];a[8]=-this[8];a[9]=-this[9];a[10]=-this[10];a[11]=-this[11];a[12]=-this[12];a[13]=-this[13];a[14]=-this[14];a[15]=-this[15];return a};c.prototype.transpose=function(){var a=new c;a[0]=this[0];a[1]=this[4];a[2]=this[8];a[3]=this[12];a[4]=this[1];a[5]=this[5];a[6]=this[9];a[7]=this[13];a[8]=this[2];a[9]=this[6];a[10]=this[10];a[11]=this[14];a[12]=this[3];a[13]=this[7];a[14]=this[11];a[15]=this[15];return a};c.prototype.transposeLG=function(a){a[0]=
this[0];a[1]=this[4];a[2]=this[8];a[3]=this[12];a[4]=this[1];a[5]=this[5];a[6]=this[9];a[7]=this[13];a[8]=this[2];a[9]=this[6];a[10]=this[10];a[11]=this[14];a[12]=this[3];a[13]=this[7];a[14]=this[11];a[15]=this[15];return a};c.prototype.empty=function(){for(var a=0,d=this.length;a<d;a++)this[a]=0};c.prototype.copy=function(a){for(var d=0;16>d;d++)a[d]=this[d];return a};c.rotationX=function(a){var d=new c,b=Math.cos(a);a=Math.sin(a);d[0]=1;d[5]=b;d[6]=-a;d[9]=a;d[10]=b;d[15]=1;return d};c.rotationXLG=
function(a,d){var b=Math.cos(a),c=Math.sin(a);d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=b;d[6]=-c;d[7]=0;d[8]=0;d[9]=c;d[10]=b;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d};c.rotationY=function(a){var d=new c,b=Math.cos(a);a=Math.sin(a);d[0]=b;d[2]=a;d[5]=1;d[8]=-a;d[10]=b;d[15]=1;return d};c.rotationYLG=function(a,d){var b=Math.cos(a),c=Math.sin(a);d[0]=b;d[1]=0;d[2]=c;d[3]=0;d[4]=0;d[5]=1;d[6]=0;d[7]=0;d[8]=-c;d[9]=0;d[10]=b;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d};c.rotationZ=function(a){var d=
new c,b=Math.cos(a);a=Math.sin(a);d[0]=b;d[1]=-a;d[4]=a;d[5]=b;d[10]=1;d[15]=1;return d};c.rotationZLG=function(a,d){var b=Math.cos(a),c=Math.sin(a);d[0]=b;d[1]=-c;d[2]=0;d[3]=0;d[4]=c;d[5]=b;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=1;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d};c.rotationAxis=function(a,d){var b=new c,f=a.normalize(),e=Math.sin(d),p=Math.cos(d),l=1-p,g=f.x,h=f.y,f=f.z,k=g*h,m=g*f,n=h*f;b[0]=p+g*g*l;b[1]=k*l-f*e;b[2]=m*l+h*e;b[4]=k*l+f*e;b[5]=p+h*h*l;b[6]=n*l-g*e;b[8]=m*l-h*e;b[9]=
n*l+g*e;b[10]=p+f*f*l;b[15]=1;return b};c.rotationAxisLG=function(a,d,b){a.normalizeLG(e);a=Math.sin(d);d=Math.cos(d);var c=1-d,f=e.x,g=e.y,l=e.z,h=f*g,k=f*l,m=g*l;b[0]=d+f*f*c;b[1]=h*c-l*a;b[2]=k*c+g*a;b[3]=0;b[4]=h*c+l*a;b[5]=d+g*g*c;b[6]=m*c-f*a;b[7]=0;b[8]=k*c-g*a;b[9]=m*c+f*a;b[10]=d+l*l*c;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};c.rotation=function(a,b,f){return c.rotationX(f).multiply(c.rotationZ(b)).multiply(c.rotationY(a))};c.rotationLG=function(a,d,e,r){c.rotationXLG(e,h);c.rotationZLG(d,
k);c.rotationYLG(a,b);h.multiplyLG(k,f);f.multiplyLG(b,r);return r};c.translation=function(a,b,f){var e=c.identity();e[12]=a;e[13]=b;e[14]=f;return e};c.translationLG=function(a,b,c,f){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[12]=a;f[13]=b;f[14]=c;f[15]=1;return f};c.scale=function(a,b,f){var e=new c;e[0]=a;e[5]=b;e[10]=f;e[15]=1;return e};c.scaleLG=function(a,b,f,c){c[0]=a;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=b;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=f;c[11]=0;c[12]=
0;c[13]=0;c[14]=0;c[15]=1;return c};c.identity=function(){var a=new c;a[0]=1;a[5]=1;a[10]=1;a[15]=1;return a};c.identityLG=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};c.zero=function(){return new c};c.zeroLG=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=0;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=0;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=0;return a};c.fromArray=function(a){for(var b=new c,f=0;16>f;f++)b[f]=
a[f];return b};c.fromArrayLG=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};c.copy=function(a,b){for(var c=0;16>c;c++)b[c]=a[c];return b};var h=new c,k=new c,b=new c,f=new c,e=new g(0,0,0);m.exports=c},{"./vector.js":3}],3:[function(g,m,n){function c(b,c,e){if("undefined"===typeof b||"undefined"===typeof c||"undefined"===typeof e)throw Error("Insufficient arguments.");
this.x=b;this.y=c;this.z=e}c.prototype.add=function(b){return new c(this.x+b.x,this.y+b.y,this.z+b.z)};c.prototype.addLG=function(b,c){c.x=this.x+b.x;c.y=this.y+b.y;c.z=this.z+b.z;return c};c.prototype.subtract=function(b){return new c(this.x-b.x,this.y-b.y,this.z-b.z)};c.prototype.subtractLG=function(b,c){c.x=this.x-b.x;c.y=this.y-b.y;c.z=this.z-b.z;return c};c.prototype.equal=function(b){return this.x===b.x&&this.y===b.y&&this.z===b.z};c.prototype.angle=function(b){var c=this.normalize();b=b.normalize();
var e=c.magnitude(),a=b.magnitude();if(0===e||0===a)return 0;c=c.dot(b)/(e*a);-1>c&&(c=-1);1<c&&(c=1);return Math.acos(c)};c.prototype.angleLG=function(b){this.normalizeLG(h);b.normalizeLG(k);b=h.magnitude();var c=k.magnitude();if(0===b||0===c)return 0;b=h.dot(k)/(b*c);-1>b&&(b=-1);1<b&&(b=1);return Math.acos(b)};c.prototype.cosAngle=function(b){var c=this.normalize();b=b.normalize();var e=c.magnitude(),a=b.magnitude();if(0===e||0===a)return 0;c=c.dot(b)/(e*a);-1>c&&(c=-1);1<c&&(c=1);return c};c.prototype.cosAngleLG=
function(b){this.normalizeLG(h);b.normalizeLG(k);b=h.magnitude();var c=k.magnitude();if(0===b||0===c)return 0;b=h.dot(k)/(b*c);-1>b&&(b=-1);1<b&&(b=1);return b};c.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};c.prototype.magnitudeSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z};c.prototype.dot=function(b){return this.x*b.x+this.y*b.y+this.z*b.z};c.prototype.cross=function(b){return new c(this.y*b.z-this.z*b.y,this.z*b.x-this.x*b.z,
this.x*b.y-this.y*b.x)};c.prototype.crossLG=function(b,c){c.x=this.y*b.z-this.z*b.y;c.y=this.z*b.x-this.x*b.z;c.z=this.x*b.y-this.y*b.x;return c};c.prototype.normalize=function(){var b=this.magnitude();return 0===b?new c(this.x,this.y,this.z):new c(this.x/b,this.y/b,this.z/b)};c.prototype.normalizeLG=function(b){var c=this.magnitude();0===c&&(b.x=this.x,b.y=this.y,b.z=this.z);b.x=this.x/c;b.y=this.y/c;b.z=this.z/c;return b};c.prototype.scale=function(b){return new c(this.x*b,this.y*b,this.z*b)};c.prototype.scaleLG=
function(b,c){c.x=this.x*b;c.y=this.y*b;c.z=this.z*b;return c};c.prototype.negate=function(){return new c(-this.x,-this.y,-this.z)};c.prototype.negateLG=function(b){b.x=-this.x;b.y=-this.y;b.z=-this.z;return b};c.prototype.vectorProjection=function(b){var c=b.magnitude();return b.scale(this.dot(b)/(c*c))};c.prototype.vectorProjectionLG=function(b,c){var e=b.magnitude();b.scaleLG(this.dot(b)/(e*e),c);return c};c.prototype.scalarProjection=function(b){return this.dot(b)/b.magnitude()};c.prototype.transform=
function(b){var f=this.x*b[3]+this.y*b[7]+this.z*b[11]+b[15];return new c((this.x*b[0]+this.y*b[4]+this.z*b[8]+b[12])/f,(this.x*b[1]+this.y*b[5]+this.z*b[9]+b[13])/f,(this.x*b[2]+this.y*b[6]+this.z*b[10]+b[14])/f)};c.prototype.transformLG=function(b,c){var e=this.x*b[1]+this.y*b[5]+this.z*b[9]+b[13],a=this.x*b[2]+this.y*b[6]+this.z*b[10]+b[14],d=this.x*b[3]+this.y*b[7]+this.z*b[11]+b[15];c.x=(this.x*b[0]+this.y*b[4]+this.z*b[8]+b[12])/d;c.y=e/d;c.z=a/d;return c};c.prototype.rotate=function(b,f){var e=
b.normalize(),a=Math.sin(f),d=Math.cos(f),g=1-d,h=e.x,k=e.y,m=e.z,l=e.x*e.y,n=e.x*e.z,e=e.y*e.z;return new c((d+h*h*g)*this.x+(l*g-m*a)*this.y+(n*g+k*a)*this.z,(l*g+m*a)*this.x+(d+k*k*g)*this.y+(e*g-h*a)*this.z,(n*g-k*a)*this.x+(e*g+h*a)*this.y+(d+h*h*g)*this.z)};c.prototype.rotateLG=function(b,c,e){b.normalizeLG(e);b=Math.sin(c);c=Math.cos(c);var a=1-c,d=e.x,g=e.y,h=e.z,k=e.x*e.y,m=e.x*e.z,l=e.y*e.z,n=(k*a+h*b)*this.x+(c+g*g*a)*this.y+(l*a-d*b)*this.z,l=(m*a-g*b)*this.x+(l*a+d*b)*this.y+(c+d*d*a)*
this.z;e.x=(c+d*d*a)*this.x+(k*a-h*b)*this.y+(m*a+g*b)*this.z;e.y=n;e.z=l;return e};c.prototype.rotateX=function(b){var f=Math.sin(b);b=Math.cos(b);return new c(this.x,b*this.y-f*this.z,f*this.y+b*this.z)};c.prototype.rotateXLG=function(b,c){var e=Math.sin(b),a=Math.cos(b),d=a*this.y-e*this.z,e=e*this.y+a*this.z;c.x=this.x;c.y=d;c.z=e;return c};c.prototype.rotateY=function(b){var f=Math.sin(b);b=Math.cos(b);return new c(b*this.x+f*this.z,this.y,-(f*this.x)+b*this.z)};c.prototype.rotateYLG=function(b,
c){var e=Math.sin(b),a=Math.cos(b),d=this.y,g=-(e*this.x)+a*this.z;c.x=a*this.x+e*this.z;c.y=d;c.z=g;return c};c.prototype.rotateZ=function(b){var f=Math.sin(b);b=Math.cos(b);return new c(b*this.x-f*this.y,f*this.x+b*this.y,this.z)};c.prototype.rotateZLG=function(b,c){var e=Math.sin(b),a=Math.cos(b),d=e*this.x+a*this.y,g=this.z;c.x=a*this.x-e*this.y;c.y=d;c.z=g;return c};c.prototype.rotatePitchYawRoll=function(b,c,e){return this.rotateX(e).rotateY(b).rotateZ(c)};c.prototype.rotatePitchYawRollLG=function(b,
c,e,a){this.rotateXLG(e,a);a.rotateYLG(b,a);a.rotateZLG(c,a);return a};var h=new c(0,0,0),k=new c(0,0,0);m.exports=c},{}]},{},[1])(1)});

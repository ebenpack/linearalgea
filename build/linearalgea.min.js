/*

 Copyright (c) 2014 Eben Packwood. All rights reserved.
 MIT License


 Copyright (c) 2014 Eben Packwood. All rights reserved.
 MIT License

*/
!function(s){if("object"==typeof exports)module.exports=s();else if("function"==typeof define&&define.amd)define(s);else{var g;"undefined"!=typeof window?g=window:"undefined"!=typeof global?g=global:"undefined"!=typeof self&&(g=self);g.linearalgea=s()}}(function(){return function g(m,n,c){function h(a,d){if(!n[a]){if(!m[a]){var b="function"==typeof require&&require;if(!d&&b)return b(a,!0);if(k)return k(a,!0);throw Error("Cannot find module '"+a+"'");}b=n[a]={exports:{}};m[a][0].call(b.exports,function(b){var e=
m[a][1][b];return h(e?e:b)},b,b.exports,g,m,n,c)}return n[a].exports}for(var k="function"==typeof require&&require,a=0;a<c.length;a++)h(c[a]);return h}({1:[function(g,m,n){n=g("./vector.js");g=g("./matrix.js");var c=Object.create(null);c.Vector=n;c.Matrix=g;m.exports=c},{"./matrix.js":2,"./vector.js":3}],2:[function(g,m,n){function c(){for(var b=0;16>b;b++)this[b]=0;this.length=16}g=g("./vector.js");c.prototype.equal=function(b){for(var a=0,e=this.length;a<e;a++)if(this[a]!==b[a])return!1;return!0};
c.prototype.add=function(b){for(var a=new c,e=0,f=this.length;e<f;e++)a[e]=this[e]+b[e];return a};c.prototype.addRef=function(b,a){for(var e=0,c=this.length;e<c;e++)a[e]=this[e]+b[e]};c.prototype.subtract=function(b){for(var a=new c,e=0,f=this.length;e<f;e++)a[e]=this[e]-b[e];return a};c.prototype.subtractRef=function(b,a){for(var e=0,c=this.length;e<c;e++)a[e]=this[e]-b[e]};c.prototype.multiplyScalar=function(b){for(var a=new c,e=0,f=this.length;e<f;e++)a[e]=this[e]*b;return a};c.prototype.multiplyScalarRef=
function(b,a){for(var c=0,f=this.length;c<f;c++)a[c]=this[c]*b};c.prototype.multiply=function(b){var a=new c;a[0]=this[0]*b[0]+this[1]*b[4]+this[2]*b[8]+this[3]*b[12];a[1]=this[0]*b[1]+this[1]*b[5]+this[2]*b[9]+this[3]*b[13];a[2]=this[0]*b[2]+this[1]*b[6]+this[2]*b[10]+this[3]*b[14];a[3]=this[0]*b[3]+this[1]*b[7]+this[2]*b[11]+this[3]*b[15];a[4]=this[4]*b[0]+this[5]*b[4]+this[6]*b[8]+this[7]*b[12];a[5]=this[4]*b[1]+this[5]*b[5]+this[6]*b[9]+this[7]*b[13];a[6]=this[4]*b[2]+this[5]*b[6]+this[6]*b[10]+
this[7]*b[14];a[7]=this[4]*b[3]+this[5]*b[7]+this[6]*b[11]+this[7]*b[15];a[8]=this[8]*b[0]+this[9]*b[4]+this[10]*b[8]+this[11]*b[12];a[9]=this[8]*b[1]+this[9]*b[5]+this[10]*b[9]+this[11]*b[13];a[10]=this[8]*b[2]+this[9]*b[6]+this[10]*b[10]+this[11]*b[14];a[11]=this[8]*b[3]+this[9]*b[7]+this[10]*b[11]+this[11]*b[15];a[12]=this[12]*b[0]+this[13]*b[4]+this[14]*b[8]+this[15]*b[12];a[13]=this[12]*b[1]+this[13]*b[5]+this[14]*b[9]+this[15]*b[13];a[14]=this[12]*b[2]+this[13]*b[6]+this[14]*b[10]+this[15]*
b[14];a[15]=this[12]*b[3]+this[13]*b[7]+this[14]*b[11]+this[15]*b[15];return a};c.prototype.multiplyRef=function(b,a){a[0]=this[0]*b[0]+this[1]*b[4]+this[2]*b[8]+this[3]*b[12];a[1]=this[0]*b[1]+this[1]*b[5]+this[2]*b[9]+this[3]*b[13];a[2]=this[0]*b[2]+this[1]*b[6]+this[2]*b[10]+this[3]*b[14];a[3]=this[0]*b[3]+this[1]*b[7]+this[2]*b[11]+this[3]*b[15];a[4]=this[4]*b[0]+this[5]*b[4]+this[6]*b[8]+this[7]*b[12];a[5]=this[4]*b[1]+this[5]*b[5]+this[6]*b[9]+this[7]*b[13];a[6]=this[4]*b[2]+this[5]*b[6]+this[6]*
b[10]+this[7]*b[14];a[7]=this[4]*b[3]+this[5]*b[7]+this[6]*b[11]+this[7]*b[15];a[8]=this[8]*b[0]+this[9]*b[4]+this[10]*b[8]+this[11]*b[12];a[9]=this[8]*b[1]+this[9]*b[5]+this[10]*b[9]+this[11]*b[13];a[10]=this[8]*b[2]+this[9]*b[6]+this[10]*b[10]+this[11]*b[14];a[11]=this[8]*b[3]+this[9]*b[7]+this[10]*b[11]+this[11]*b[15];a[12]=this[12]*b[0]+this[13]*b[4]+this[14]*b[8]+this[15]*b[12];a[13]=this[12]*b[1]+this[13]*b[5]+this[14]*b[9]+this[15]*b[13];a[14]=this[12]*b[2]+this[13]*b[6]+this[14]*b[10]+this[15]*
b[14];a[15]=this[12]*b[3]+this[13]*b[7]+this[14]*b[11]+this[15]*b[15]};c.prototype.negate=function(){for(var b=new c,a=0,e=this.length;a<e;a++)b[a]=-this[a];return b};c.prototype.negateRef=function(b){for(var a=0,c=this.length;a<c;a++)b[a]=-this[a]};c.prototype.transpose=function(){var b=new c;b[0]=this[0];b[1]=this[4];b[2]=this[8];b[3]=this[12];b[4]=this[1];b[5]=this[5];b[6]=this[9];b[7]=this[13];b[8]=this[2];b[9]=this[6];b[10]=this[10];b[11]=this[14];b[12]=this[3];b[13]=this[7];b[14]=this[11];b[15]=
this[15];return b};c.prototype.transposeRef=function(b){b[0]=this[0];b[1]=this[4];b[2]=this[8];b[3]=this[12];b[4]=this[1];b[5]=this[5];b[6]=this[9];b[7]=this[13];b[8]=this[2];b[9]=this[6];b[10]=this[10];b[11]=this[14];b[12]=this[3];b[13]=this[7];b[14]=this[11];b[15]=this[15]};c.prototype.empty=function(){for(var b=0,a=this.length;b<a;b++)this[b]=0};c.rotationX=function(b){var a=new c,e=Math.cos(b);b=Math.sin(b);a[0]=1;a[5]=e;a[6]=-b;a[9]=b;a[10]=e;a[15]=1;return a};c.rotationXRef=function(b,a){var c=
Math.cos(b),f=Math.sin(b);a.empty();a[0]=1;a[5]=c;a[6]=-f;a[9]=f;a[10]=c;a[15]=1};c.rotationY=function(b){var a=new c,e=Math.cos(b);b=Math.sin(b);a[0]=e;a[2]=b;a[5]=1;a[8]=-b;a[10]=e;a[15]=1;return a};c.rotationYRef=function(b,a){var c=Math.cos(b),f=Math.sin(b);a.empty();a[0]=c;a[2]=f;a[5]=1;a[8]=-f;a[10]=c;a[15]=1};c.rotationZ=function(b){var a=new c,f=Math.cos(b);b=Math.sin(b);a[0]=f;a[1]=-b;a[4]=b;a[5]=f;a[10]=1;a[15]=1;return a};c.rotationZRef=function(b,a){var c=Math.cos(b),f=Math.sin(b);a.empty();
a[0]=c;a[1]=-f;a[4]=f;a[5]=c;a[10]=1;a[15]=1};c.rotationAxis=function(a,f){var e=new c,d=a.normalize(),q=Math.sin(f),r=Math.cos(f),l=1-r,g=d.x,h=d.y,d=d.z,k=g*h,m=g*d,n=h*d;e[0]=r+g*g*l;e[1]=k*l-d*q;e[2]=m*l+h*q;e[4]=k*l+d*q;e[5]=r+h*h*l;e[6]=n*l-g*q;e[8]=m*l-h*q;e[9]=n*l+g*q;e[10]=r+d*d*l;e[15]=1;return e};c.rotationAxisRef=function(a,c,f){a.normalizeRef(d);a=Math.sin(c);c=Math.cos(c);var p=1-c,g=d.x,h=d.y,l=d.z,k=g*h,m=g*l,n=h*l;f.empty();f[0]=c+g*g*p;f[1]=k*p-l*a;f[2]=m*p+h*a;f[4]=k*p+l*a;f[5]=
c+h*h*p;f[6]=n*p-g*a;f[8]=m*p-h*a;f[9]=n*p+g*a;f[10]=c+l*l*p;f[15]=1};c.rotation=function(a,f,e){return c.rotationX(e).multiply(c.rotationZ(f)).multiply(c.rotationY(a))};c.rotationRef=function(b,d,e,p){h.empty();k.empty();a.empty();f.empty();p.empty();c.rotationXRef(e,h);c.rotationZRef(d,k);c.rotationYRef(b,a);h.multiplyRef(k,f);f.multiplyRef(a,p)};c.translation=function(a,f,e){var d=c.identity();d[12]=a;d[13]=f;d[14]=e;return d};c.translationRef=function(a,f,e,d){c.identityRef(d);d[12]=a;d[13]=f;
d[14]=e};c.scale=function(a,f,e){var d=new c;d[0]=a;d[5]=f;d[10]=e;d[15]=1;return d};c.scaleRef=function(a,f,e,d){c.zeroRef(d);d[0]=a;d[5]=f;d[10]=e;d[15]=1};c.identity=function(){var a=new c;a[0]=1;a[5]=1;a[10]=1;a[15]=1;return a};c.identityRef=function(a){for(var c=0;16>c;c++)a[c]=0;a[0]=1;a[5]=1;a[10]=1;a[15]=1};c.zero=function(){return new c};c.zeroRef=function(a){for(var c=0;16>c;c++)a[c]=0};c.fromArray=function(a){for(var f=new c,d=0;16>d;d++)f[d]=a[d];return f};c.fromArrayRef=function(a,c){for(var f=
0;16>f;f++)c[f]=a[f]};var h=new c,k=new c,a=new c,f=new c,d=new g(0,0,0);m.exports=c},{"./vector.js":3}],3:[function(g,m,n){function c(a,c,d){if("undefined"===typeof a||"undefined"===typeof c||"undefined"===typeof d)throw Error("Insufficient arguments.");this.x=a;this.y=c;this.z=d}c.prototype.add=function(a){return new c(this.x+a.x,this.y+a.y,this.z+a.z)};c.prototype.addRef=function(a,c){c.x=this.x+a.x;c.y=this.y+a.y;c.z=this.z+a.z};c.prototype.subtract=function(a){return new c(this.x-a.x,this.y-
a.y,this.z-a.z)};c.prototype.subtractRef=function(a,c){c.x=this.x-a.x;c.y=this.y-a.y;c.z=this.z-a.z};c.prototype.equal=function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z};c.prototype.angle=function(a){var c=this.normalize();a=a.normalize();var d=c.magnitude(),b=a.magnitude();if(0===d||0===b)return 0;c=c.dot(a)/(d*b);-1>c&&(c=-1);1<c&&(c=1);return Math.acos(c)};c.prototype.angleRef=function(a){this.normalizeRef(h);a.normalizeRef(k);a=h.magnitude();var c=k.magnitude();if(0===a||0===c)return 0;
a=h.dot(k)/(a*c);-1>a&&(a=-1);1<a&&(a=1);return Math.acos(a)};c.prototype.cosAngle=function(a){var c=this.normalize();a=a.normalize();var d=c.magnitude(),b=a.magnitude();if(0===d||0===b)return 0;c=c.dot(a)/(d*b);-1>c&&(c=-1);1<c&&(c=1);return c};c.prototype.cosAngleRef=function(a){this.normalizeRef(h);a.normalizeRef(k);a=h.magnitude();var c=k.magnitude();if(0===a||0===c)return 0;a=h.dot(k)/(a*c);-1>a&&(a=-1);1<a&&(a=1);return a};c.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*
this.y+this.z*this.z)};c.prototype.magnitudeSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z};c.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z};c.prototype.cross=function(a){return new c(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)};c.prototype.crossRef=function(a,c){c.x=this.y*a.z-this.z*a.y;c.y=this.z*a.x-this.x*a.z;c.z=this.x*a.y-this.y*a.x};c.prototype.normalize=function(){var a=this.magnitude();return 0===a?new c(this.x,this.y,this.z):
new c(this.x/a,this.y/a,this.z/a)};c.prototype.normalizeRef=function(a){var c=this.magnitude();0===c&&(a.x=this.x,a.y=this.y,a.z=this.z);a.x=this.x/c;a.y=this.y/c;a.z=this.z/c};c.prototype.scale=function(a){return new c(this.x*a,this.y*a,this.z*a)};c.prototype.scaleRef=function(a,c){c.x=this.x*a;c.y=this.y*a;c.z=this.z*a};c.prototype.negate=function(){return new c(-this.x,-this.y,-this.z)};c.prototype.negateRef=function(a){a.x=-this.x;a.y=-this.y;a.z=-this.z};c.prototype.vectorProjection=function(a){var c=
a.magnitude();return a.scale(this.dot(a)/(c*c))};c.prototype.vectorProjectionRef=function(a,c){var d=a.magnitude();a.scaleRef(this.dot(a)/(d*d),c)};c.prototype.scalarProjection=function(a){return this.dot(a)/a.magnitude()};c.prototype.transform=function(a){var f=this.x*a[3]+this.y*a[7]+this.z*a[11]+a[15];return new c((this.x*a[0]+this.y*a[4]+this.z*a[8]+a[12])/f,(this.x*a[1]+this.y*a[5]+this.z*a[9]+a[13])/f,(this.x*a[2]+this.y*a[6]+this.z*a[10]+a[14])/f)};c.prototype.transformRef=function(a,c){var d=
this.x*a[1]+this.y*a[5]+this.z*a[9]+a[13],b=this.x*a[2]+this.y*a[6]+this.z*a[10]+a[14],g=this.x*a[3]+this.y*a[7]+this.z*a[11]+a[15];c.x=(this.x*a[0]+this.y*a[4]+this.z*a[8]+a[12])/g;c.y=d/g;c.z=b/g};c.prototype.rotate=function(a,f){var d=a.normalize(),b=Math.sin(f),g=Math.cos(f),e=1-g,h=d.x,k=d.y,m=d.z,l=d.x*d.y,n=d.x*d.z,d=d.y*d.z;return new c((g+h*h*e)*this.x+(l*e-m*b)*this.y+(n*e+k*b)*this.z,(l*e+m*b)*this.x+(g+k*k*e)*this.y+(d*e-h*b)*this.z,(n*e-k*b)*this.x+(d*e+h*b)*this.y+(g+h*h*e)*this.z)};
c.prototype.rotateRef=function(a,c,d){a.normalizeRef(d);a=Math.sin(c);c=Math.cos(c);var b=1-c,g=d.x,e=d.y,h=d.z,k=d.x*d.y,m=d.x*d.z,l=d.y*d.z,n=(k*b+h*a)*this.x+(c+e*e*b)*this.y+(l*b-g*a)*this.z,l=(m*b-e*a)*this.x+(l*b+g*a)*this.y+(c+g*g*b)*this.z;d.x=(c+g*g*b)*this.x+(k*b-h*a)*this.y+(m*b+e*a)*this.z;d.y=n;d.z=l};c.prototype.rotateX=function(a){var f=Math.sin(a);a=Math.cos(a);return new c(this.x,a*this.y-f*this.z,f*this.y+a*this.z)};c.prototype.rotateXRef=function(a,c){var d=Math.sin(a),b=Math.cos(a),
g=b*this.y-d*this.z,d=d*this.y+b*this.z;c.x=this.x;c.y=g;c.z=d};c.prototype.rotateY=function(a){var f=Math.sin(a);a=Math.cos(a);return new c(a*this.x+f*this.z,this.y,-(f*this.x)+a*this.z)};c.prototype.rotateYRef=function(a,c){var d=Math.sin(a),b=Math.cos(a),g=this.y,e=-(d*this.x)+b*this.z;c.x=b*this.x+d*this.z;c.y=g;c.z=e};c.prototype.rotateZ=function(a){var f=Math.sin(a);a=Math.cos(a);return new c(a*this.x-f*this.y,f*this.x+a*this.y,this.z)};c.prototype.rotateZRef=function(a,c){var d=Math.sin(a),
b=Math.cos(a),g=d*this.x+b*this.y,e=this.z;c.x=b*this.x-d*this.y;c.y=g;c.z=e};c.prototype.rotatePitchYawRoll=function(a,c,d){return this.rotateX(d).rotateY(a).rotateZ(c)};c.prototype.rotatePitchYawRollRef=function(a,c,d,b){this.rotateXRef(d,b);b.rotateYRef(a,b);b.rotateZRef(c,b)};var h=new c(0,0,0),k=new c(0,0,0);m.exports=c},{}]},{},[1])(1)});

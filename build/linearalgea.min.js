/*

 Copyright (c) 2014 Eben Packwood. All rights reserved.
 MIT License

*/
!function(r){if("object"==typeof exports)module.exports=r();else if("function"==typeof define&&define.amd)define(r);else{var g;"undefined"!=typeof window?g=window:"undefined"!=typeof global?g=global:"undefined"!=typeof self&&(g=self);g.linearalgea=r()}}(function(){return function g(m,n,c){function h(a,e){if(!n[a]){if(!m[a]){var b="function"==typeof require&&require;if(!e&&b)return b(a,!0);if(k)return k(a,!0);throw Error("Cannot find module '"+a+"'");}b=n[a]={exports:{}};m[a][0].call(b.exports,function(b){var d=
m[a][1][b];return h(d?d:b)},b,b.exports,g,m,n,c)}return n[a].exports}for(var k="function"==typeof require&&require,a=0;a<c.length;a++)h(c[a]);return h}({1:[function(g,m,n){n=g("./vector.js");g=g("./matrix.js");var c=Object.create(null);c.Vector=n;c.Matrix=g;m.exports=c},{"./matrix.js":2,"./vector.js":3}],2:[function(g,m,n){function c(){for(var b=0;16>b;b++)this[b]=0;this.length=16}g=g("./vector.js");c.prototype.equal=function(b){for(var a=0,d=this.length;a<d;a++)if(this[a]!==b[a])return!1;return!0};
c.prototype.add=function(b){for(var a=new c,d=0,f=this.length;d<f;d++)a[d]=this[d]+b[d];return a};c.prototype.addLG=function(b,a){for(var d=0,c=this.length;d<c;d++)a[d]=this[d]+b[d]};c.prototype.subtract=function(b){for(var a=new c,d=0,f=this.length;d<f;d++)a[d]=this[d]-b[d];return a};c.prototype.subtractLG=function(b,a){for(var d=0,c=this.length;d<c;d++)a[d]=this[d]-b[d]};c.prototype.multiplyScalar=function(b){for(var a=new c,d=0,f=this.length;d<f;d++)a[d]=this[d]*b;return a};c.prototype.multiplyScalarLG=
function(b,a){for(var d=0,c=this.length;d<c;d++)a[d]=this[d]*b};c.prototype.multiply=function(b){var a=new c;a[0]=this[0]*b[0]+this[1]*b[4]+this[2]*b[8]+this[3]*b[12];a[1]=this[0]*b[1]+this[1]*b[5]+this[2]*b[9]+this[3]*b[13];a[2]=this[0]*b[2]+this[1]*b[6]+this[2]*b[10]+this[3]*b[14];a[3]=this[0]*b[3]+this[1]*b[7]+this[2]*b[11]+this[3]*b[15];a[4]=this[4]*b[0]+this[5]*b[4]+this[6]*b[8]+this[7]*b[12];a[5]=this[4]*b[1]+this[5]*b[5]+this[6]*b[9]+this[7]*b[13];a[6]=this[4]*b[2]+this[5]*b[6]+this[6]*b[10]+
this[7]*b[14];a[7]=this[4]*b[3]+this[5]*b[7]+this[6]*b[11]+this[7]*b[15];a[8]=this[8]*b[0]+this[9]*b[4]+this[10]*b[8]+this[11]*b[12];a[9]=this[8]*b[1]+this[9]*b[5]+this[10]*b[9]+this[11]*b[13];a[10]=this[8]*b[2]+this[9]*b[6]+this[10]*b[10]+this[11]*b[14];a[11]=this[8]*b[3]+this[9]*b[7]+this[10]*b[11]+this[11]*b[15];a[12]=this[12]*b[0]+this[13]*b[4]+this[14]*b[8]+this[15]*b[12];a[13]=this[12]*b[1]+this[13]*b[5]+this[14]*b[9]+this[15]*b[13];a[14]=this[12]*b[2]+this[13]*b[6]+this[14]*b[10]+this[15]*
b[14];a[15]=this[12]*b[3]+this[13]*b[7]+this[14]*b[11]+this[15]*b[15];return a};c.prototype.multiplyLG=function(b,a){a[0]=this[0]*b[0]+this[1]*b[4]+this[2]*b[8]+this[3]*b[12];a[1]=this[0]*b[1]+this[1]*b[5]+this[2]*b[9]+this[3]*b[13];a[2]=this[0]*b[2]+this[1]*b[6]+this[2]*b[10]+this[3]*b[14];a[3]=this[0]*b[3]+this[1]*b[7]+this[2]*b[11]+this[3]*b[15];a[4]=this[4]*b[0]+this[5]*b[4]+this[6]*b[8]+this[7]*b[12];a[5]=this[4]*b[1]+this[5]*b[5]+this[6]*b[9]+this[7]*b[13];a[6]=this[4]*b[2]+this[5]*b[6]+this[6]*
b[10]+this[7]*b[14];a[7]=this[4]*b[3]+this[5]*b[7]+this[6]*b[11]+this[7]*b[15];a[8]=this[8]*b[0]+this[9]*b[4]+this[10]*b[8]+this[11]*b[12];a[9]=this[8]*b[1]+this[9]*b[5]+this[10]*b[9]+this[11]*b[13];a[10]=this[8]*b[2]+this[9]*b[6]+this[10]*b[10]+this[11]*b[14];a[11]=this[8]*b[3]+this[9]*b[7]+this[10]*b[11]+this[11]*b[15];a[12]=this[12]*b[0]+this[13]*b[4]+this[14]*b[8]+this[15]*b[12];a[13]=this[12]*b[1]+this[13]*b[5]+this[14]*b[9]+this[15]*b[13];a[14]=this[12]*b[2]+this[13]*b[6]+this[14]*b[10]+this[15]*
b[14];a[15]=this[12]*b[3]+this[13]*b[7]+this[14]*b[11]+this[15]*b[15]};c.prototype.negate=function(){for(var b=new c,a=0,d=this.length;a<d;a++)b[a]=-this[a];return b};c.prototype.negateLG=function(b){for(var a=0,d=this.length;a<d;a++)b[a]=-this[a]};c.prototype.transpose=function(){var b=new c;b[0]=this[0];b[1]=this[4];b[2]=this[8];b[3]=this[12];b[4]=this[1];b[5]=this[5];b[6]=this[9];b[7]=this[13];b[8]=this[2];b[9]=this[6];b[10]=this[10];b[11]=this[14];b[12]=this[3];b[13]=this[7];b[14]=this[11];b[15]=
this[15];return b};c.prototype.transposeLG=function(b){b[0]=this[0];b[1]=this[4];b[2]=this[8];b[3]=this[12];b[4]=this[1];b[5]=this[5];b[6]=this[9];b[7]=this[13];b[8]=this[2];b[9]=this[6];b[10]=this[10];b[11]=this[14];b[12]=this[3];b[13]=this[7];b[14]=this[11];b[15]=this[15]};c.prototype.empty=function(){for(var b=0,a=this.length;b<a;b++)this[b]=0};c.prototype.copy=function(b){for(var a=0;16>a;a++)b[a]=this[a]};c.rotationX=function(b){var a=new c,d=Math.cos(b);b=Math.sin(b);a[0]=1;a[5]=d;a[6]=-b;a[9]=
b;a[10]=d;a[15]=1;return a};c.rotationXLG=function(b,a){var d=Math.cos(b),c=Math.sin(b);a.empty();a[0]=1;a[5]=d;a[6]=-c;a[9]=c;a[10]=d;a[15]=1};c.rotationY=function(b){var a=new c,d=Math.cos(b);b=Math.sin(b);a[0]=d;a[2]=b;a[5]=1;a[8]=-b;a[10]=d;a[15]=1;return a};c.rotationYLG=function(b,a){var c=Math.cos(b),f=Math.sin(b);a.empty();a[0]=c;a[2]=f;a[5]=1;a[8]=-f;a[10]=c;a[15]=1};c.rotationZ=function(b){var a=new c,d=Math.cos(b);b=Math.sin(b);a[0]=d;a[1]=-b;a[4]=b;a[5]=d;a[10]=1;a[15]=1;return a};c.rotationZLG=
function(a,c){var d=Math.cos(a),f=Math.sin(a);c.empty();c[0]=d;c[1]=-f;c[4]=f;c[5]=d;c[10]=1;c[15]=1};c.rotationAxis=function(a,f){var d=new c,e=a.normalize(),p=Math.sin(f),q=Math.cos(f),l=1-q,g=e.x,h=e.y,e=e.z,k=g*h,m=g*e,n=h*e;d[0]=q+g*g*l;d[1]=k*l-e*p;d[2]=m*l+h*p;d[4]=k*l+e*p;d[5]=q+h*h*l;d[6]=n*l-g*p;d[8]=m*l-h*p;d[9]=n*l+g*p;d[10]=q+e*e*l;d[15]=1;return d};c.rotationAxisLG=function(a,c,d){a.normalizeLG(e);a=Math.sin(c);c=Math.cos(c);var f=1-c,g=e.x,h=e.y,l=e.z,k=g*h,m=g*l,n=h*l;d.empty();d[0]=
c+g*g*f;d[1]=k*f-l*a;d[2]=m*f+h*a;d[4]=k*f+l*a;d[5]=c+h*h*f;d[6]=n*f-g*a;d[8]=m*f-h*a;d[9]=n*f+g*a;d[10]=c+l*l*f;d[15]=1};c.rotation=function(a,f,d){return c.rotationX(d).multiply(c.rotationZ(f)).multiply(c.rotationY(a))};c.rotationLG=function(b,e,d,s){h.empty();k.empty();a.empty();f.empty();s.empty();c.rotationXLG(d,h);c.rotationZLG(e,k);c.rotationYLG(b,a);h.multiplyLG(k,f);f.multiplyLG(a,s)};c.translation=function(a,f,d){var e=c.identity();e[12]=a;e[13]=f;e[14]=d;return e};c.translationLG=function(a,
f,d,e){c.identityLG(e);e[12]=a;e[13]=f;e[14]=d};c.scale=function(a,f,d){var e=new c;e[0]=a;e[5]=f;e[10]=d;e[15]=1;return e};c.scaleLG=function(a,f,d,e){c.zeroLG(e);e[0]=a;e[5]=f;e[10]=d;e[15]=1};c.identity=function(){var a=new c;a[0]=1;a[5]=1;a[10]=1;a[15]=1;return a};c.identityLG=function(a){for(var c=0;16>c;c++)a[c]=0;a[0]=1;a[5]=1;a[10]=1;a[15]=1};c.zero=function(){return new c};c.zeroLG=function(a){for(var c=0;16>c;c++)a[c]=0};c.fromArray=function(a){for(var f=new c,d=0;16>d;d++)f[d]=a[d];return f};
c.fromArrayLG=function(a,c){for(var f=0;16>f;f++)c[f]=a[f]};c.copy=function(a,c){for(var f=0;16>f;f++)c[f]=a[f]};var h=new c,k=new c,a=new c,f=new c,e=new g(0,0,0);m.exports=c},{"./vector.js":3}],3:[function(g,m,n){function c(a,c,e){if("undefined"===typeof a||"undefined"===typeof c||"undefined"===typeof e)throw Error("Insufficient arguments.");this.x=a;this.y=c;this.z=e}c.prototype.add=function(a){return new c(this.x+a.x,this.y+a.y,this.z+a.z)};c.prototype.addLG=function(a,c){c.x=this.x+a.x;c.y=this.y+
a.y;c.z=this.z+a.z};c.prototype.subtract=function(a){return new c(this.x-a.x,this.y-a.y,this.z-a.z)};c.prototype.subtractLG=function(a,c){c.x=this.x-a.x;c.y=this.y-a.y;c.z=this.z-a.z};c.prototype.equal=function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z};c.prototype.angle=function(a){var c=this.normalize();a=a.normalize();var e=c.magnitude(),b=a.magnitude();if(0===e||0===b)return 0;c=c.dot(a)/(e*b);-1>c&&(c=-1);1<c&&(c=1);return Math.acos(c)};c.prototype.angleLG=function(a){this.normalizeLG(h);
a.normalizeLG(k);a=h.magnitude();var c=k.magnitude();if(0===a||0===c)return 0;a=h.dot(k)/(a*c);-1>a&&(a=-1);1<a&&(a=1);return Math.acos(a)};c.prototype.cosAngle=function(a){var c=this.normalize();a=a.normalize();var e=c.magnitude(),b=a.magnitude();if(0===e||0===b)return 0;c=c.dot(a)/(e*b);-1>c&&(c=-1);1<c&&(c=1);return c};c.prototype.cosAngleLG=function(a){this.normalizeLG(h);a.normalizeLG(k);a=h.magnitude();var c=k.magnitude();if(0===a||0===c)return 0;a=h.dot(k)/(a*c);-1>a&&(a=-1);1<a&&(a=1);return a};
c.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};c.prototype.magnitudeSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z};c.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z};c.prototype.cross=function(a){return new c(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)};c.prototype.crossLG=function(a,c){c.x=this.y*a.z-this.z*a.y;c.y=this.z*a.x-this.x*a.z;c.z=this.x*a.y-this.y*a.x};c.prototype.normalize=function(){var a=
this.magnitude();return 0===a?new c(this.x,this.y,this.z):new c(this.x/a,this.y/a,this.z/a)};c.prototype.normalizeLG=function(a){var c=this.magnitude();0===c&&(a.x=this.x,a.y=this.y,a.z=this.z);a.x=this.x/c;a.y=this.y/c;a.z=this.z/c};c.prototype.scale=function(a){return new c(this.x*a,this.y*a,this.z*a)};c.prototype.scaleLG=function(a,c){c.x=this.x*a;c.y=this.y*a;c.z=this.z*a};c.prototype.negate=function(){return new c(-this.x,-this.y,-this.z)};c.prototype.negateLG=function(a){a.x=-this.x;a.y=-this.y;
a.z=-this.z};c.prototype.vectorProjection=function(a){var c=a.magnitude();return a.scale(this.dot(a)/(c*c))};c.prototype.vectorProjectionLG=function(a,c){var e=a.magnitude();a.scaleLG(this.dot(a)/(e*e),c)};c.prototype.scalarProjection=function(a){return this.dot(a)/a.magnitude()};c.prototype.transform=function(a){var f=this.x*a[3]+this.y*a[7]+this.z*a[11]+a[15];return new c((this.x*a[0]+this.y*a[4]+this.z*a[8]+a[12])/f,(this.x*a[1]+this.y*a[5]+this.z*a[9]+a[13])/f,(this.x*a[2]+this.y*a[6]+this.z*
a[10]+a[14])/f)};c.prototype.transformLG=function(a,c){var e=this.x*a[1]+this.y*a[5]+this.z*a[9]+a[13],b=this.x*a[2]+this.y*a[6]+this.z*a[10]+a[14],g=this.x*a[3]+this.y*a[7]+this.z*a[11]+a[15];c.x=(this.x*a[0]+this.y*a[4]+this.z*a[8]+a[12])/g;c.y=e/g;c.z=b/g};c.prototype.rotate=function(a,f){var e=a.normalize(),b=Math.sin(f),g=Math.cos(f),d=1-g,h=e.x,k=e.y,m=e.z,l=e.x*e.y,n=e.x*e.z,e=e.y*e.z;return new c((g+h*h*d)*this.x+(l*d-m*b)*this.y+(n*d+k*b)*this.z,(l*d+m*b)*this.x+(g+k*k*d)*this.y+(e*d-h*b)*
this.z,(n*d-k*b)*this.x+(e*d+h*b)*this.y+(g+h*h*d)*this.z)};c.prototype.rotateLG=function(a,c,e){a.normalizeLG(e);a=Math.sin(c);c=Math.cos(c);var b=1-c,g=e.x,d=e.y,h=e.z,k=e.x*e.y,m=e.x*e.z,l=e.y*e.z,n=(k*b+h*a)*this.x+(c+d*d*b)*this.y+(l*b-g*a)*this.z,l=(m*b-d*a)*this.x+(l*b+g*a)*this.y+(c+g*g*b)*this.z;e.x=(c+g*g*b)*this.x+(k*b-h*a)*this.y+(m*b+d*a)*this.z;e.y=n;e.z=l};c.prototype.rotateX=function(a){var f=Math.sin(a);a=Math.cos(a);return new c(this.x,a*this.y-f*this.z,f*this.y+a*this.z)};c.prototype.rotateXLG=
function(a,c){var e=Math.sin(a),b=Math.cos(a),g=b*this.y-e*this.z,e=e*this.y+b*this.z;c.x=this.x;c.y=g;c.z=e};c.prototype.rotateY=function(a){var f=Math.sin(a);a=Math.cos(a);return new c(a*this.x+f*this.z,this.y,-(f*this.x)+a*this.z)};c.prototype.rotateYLG=function(a,c){var e=Math.sin(a),b=Math.cos(a),g=this.y,d=-(e*this.x)+b*this.z;c.x=b*this.x+e*this.z;c.y=g;c.z=d};c.prototype.rotateZ=function(a){var f=Math.sin(a);a=Math.cos(a);return new c(a*this.x-f*this.y,f*this.x+a*this.y,this.z)};c.prototype.rotateZLG=
function(a,c){var e=Math.sin(a),b=Math.cos(a),g=e*this.x+b*this.y,d=this.z;c.x=b*this.x-e*this.y;c.y=g;c.z=d};c.prototype.rotatePitchYawRoll=function(a,c,e){return this.rotateX(e).rotateY(a).rotateZ(c)};c.prototype.rotatePitchYawRollLG=function(a,c,e,b){this.rotateXLG(e,b);b.rotateYLG(a,b);b.rotateZLG(c,b)};var h=new c(0,0,0),k=new c(0,0,0);m.exports=c},{}]},{},[1])(1)});
